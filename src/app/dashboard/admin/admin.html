<div class="admin-dashboard">
  <!-- Top Navigation with Logout Button -->
  <div class="top-nav">
    <div class="nav-logo">EduLearn Admin</div>
    <div class="nav-actions">
      <span class="user-name">Bienvenue, {{ userName }}</span>
      <button class="logout-btn" (click)="logout()">Déconnexion</button>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero-banner">
    <div class="hero-content">
      <h1>Tableau de bord administrateur</h1>
      <p>Gérez votre plateforme scolaire depuis ici.</p>
    </div>
  </section>

  <!-- Snackbar for messages -->
  <div 
    class="snackbar" 
    [ngClass]="{
      'show': showSnackbar, 
      'success': snackbarType === 'success', 
      'error': snackbarType === 'error'
    }">
    {{ snackbarMessage }}
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="loading">
    <p>Chargement des utilisateurs...</p>
  </div>

  <!-- Action loading indicator -->
  <div *ngIf="actionLoading" class="action-loading">
    <p>Traitement de la demande...</p>
  </div>

  <!-- Statistics Section -->
  <section class="statistics-section" *ngIf="!statisticsLoading">
    <div class="table-header" style="margin-top: 50px;">
      <h2>Statistiques du système</h2>
      <div class="header-actions">
        <button class="create-btn" (click)="openCreateAdminForm()">Créer un nouvel administrateur</button>
        <button class="refresh-btn" (click)="loadStatistics()" [disabled]="statisticsLoading">
          <span *ngIf="!statisticsLoading">Actualiser</span>
          <span *ngIf="statisticsLoading">Chargement...</span>
        </button>
      </div>
    </div>
    <div class="stats-grid">
      <div class="stat-card">
        <h3>Utilisateurs</h3>
        <div class="stat-item">
          <span class="stat-label">Administrateurs :</span>
          <span class="stat-value">{{ statistics.users.admins }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Enseignants :</span>
          <span class="stat-value">{{ statistics.users.teachers }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Étudiants :</span>
          <span class="stat-value">{{ statistics.users.students }}</span>
        </div>
      </div>
      
      <div class="stat-card">
        <h3>Contenu</h3>
        <div class="stat-item">
          <span class="stat-label">Cours :</span>
          <span class="stat-value">{{ statistics.content.courses }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Tests :</span>
          <span class="stat-value">{{ statistics.content.tests }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Questions :</span>
          <span class="stat-value">{{ statistics.content.questions }}</span>
        </div>
      </div>
    </div>
  </section>
  
  <section class="statistics-section" *ngIf="statisticsLoading">
    <div class="table-header">
      <h2>Statistiques du système</h2>
      <div class="header-actions">
        <button class="refresh-btn" (click)="loadStatistics()" [disabled]="statisticsLoading">
          <span *ngIf="!statisticsLoading">Actualiser</span>
          <span *ngIf="statisticsLoading">Chargement...</span>
        </button>
      </div>
    </div>
    <div class="loading-stats">
      <p>Chargement des statistiques...</p>
    </div>
  </section>
  
  <!-- Users Section -->
  <section class="users-section" *ngIf="!loading && !error">
    <!-- Teachers Table -->
    <div class="table-container">
      <div class="table-header">
        <h2>Enseignants</h2>
        <div class="header-actions">
          <button class="refresh-btn" (click)="loadAllUsers()" [disabled]="loading">
            <span *ngIf="!loading">Actualiser</span>
            <span *ngIf="loading">Chargement...</span>
          </button>
          <button class="create-btn" (click)="openCreateTeacherForm()">Créer un nouvel enseignant</button>
        </div>
      </div>
      
      <!-- Teacher Filter -->
      <div class="filter-section">
        <div class="filter-group">
          <button 
            class="filter-btn" 
            [class.active]="teacherFilter === 'all'"
            (click)="updateTeacherFilter('all')">
            Tous les enseignants
          </button>
          <button 
            class="filter-btn" 
            [class.active]="teacherFilter === 'active'"
            (click)="updateTeacherFilter('active')">
            Actifs uniquement
          </button>
          <button 
            class="filter-btn" 
            [class.active]="teacherFilter === 'inactive'"
            (click)="updateTeacherFilter('inactive')">
            Inactifs uniquement
          </button>
          <button 
            class="filter-btn" 
            [class.active]="teacherFilter === 'newest'"
            (click)="updateTeacherFilter('newest')">
            Les plus récents
          </button>
          <button 
            class="filter-btn" 
            [class.active]="teacherFilter === 'oldest'"
            (click)="updateTeacherFilter('oldest')">
            Les plus anciens
          </button>
        </div>
      </div>
      
      <table class="users-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom d'utilisateur</th>
            <th>Email</th>
            <th>Module</th>
            <th>Statut</th>
            <th>Créé le</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let teacher of paginatedTeachers">
            <td>{{ teacher.id }}</td>
            <td>{{ teacher.username }}</td>
            <td>{{ teacher.email }}</td>
            <td>{{ teacher.module }}</td>
            <td>
              <span class="status-badge" [ngClass]="{'active': teacher.isActivated, 'inactive': !teacher.isActivated}">
                {{ teacher.isActivated ? 'Actif' : 'Inactif' }}
              </span>
            </td>
            <td>{{ teacher.created_at | date:'short' }}</td>
            <td class="action-buttons">
              <button 
                class="toggle-btn" 
                [ngClass]="{'disable-btn': teacher.isActivated, 'enable-btn': !teacher.isActivated}"
                (click)="toggleTeacherActivation(teacher)"
                [disabled]="actionLoading">
                {{ teacher.isActivated ? 'Désactiver' : 'Activer' }}
              </button>
              <button 
                class="delete-btn"
                (click)="openDeleteConfirm('teacher', teacher.id, teacher.username)"
                [disabled]="actionLoading">
                Supprimer
              </button>
            </td>
          </tr>
          <tr *ngIf="paginatedTeachers.length === 0">
            <td colspan="7" class="no-data">Aucun enseignant trouvé</td>
          </tr>
        </tbody>
      </table>
      
      <!-- Teachers Pagination -->
      <div class="pagination-controls" *ngIf="getTeacherFilteredCount() > itemsPerPage">
        <button 
          (click)="prevPageTeachers()" 
          [disabled]="currentPageTeachers === 1"
          class="pagination-btn">
          Précédent
        </button>
        <span class="pagination-info">
          Page {{ currentPageTeachers }} sur {{ getTotalPagesTeachers() }}
        </span>
        <button 
          (click)="nextPageTeachers()" 
          [disabled]="currentPageTeachers === getTotalPagesTeachers()"
          class="pagination-btn">
          Suivant
        </button>
      </div>
    </div>

    <!-- Students Table -->
    <div class="table-container">
      <div class="table-header">
        <h2>Étudiants</h2>
        <div class="header-actions">
          <button class="refresh-btn" (click)="loadAllUsers()" [disabled]="loading">
            <span *ngIf="!loading">Actualiser</span>
            <span *ngIf="loading">Chargement...</span>
          </button>
          <button class="create-btn" (click)="openCreateStudentForm()">Créer un nouvel étudiant</button>
        </div>
      </div>
      
      <!-- Student Filter -->
      <div class="filter-section">
        <div class="filter-group">
          <button 
            class="filter-btn" 
            [class.active]="studentFilter === 'all'"
            (click)="updateStudentFilter('all')">
            Tous les étudiants
          </button>
          <button 
            class="filter-btn" 
            [class.active]="studentFilter === 'active'"
            (click)="updateStudentFilter('active')">
            Actifs uniquement
          </button>
          <button 
            class="filter-btn" 
            [class.active]="studentFilter === 'inactive'"
            (click)="updateStudentFilter('inactive')">
            Inactifs uniquement
          </button>
          <button 
            class="filter-btn" 
            [class.active]="studentFilter === 'newest'"
            (click)="updateStudentFilter('newest')">
            Les plus récents
          </button>
          <button 
            class="filter-btn" 
            [class.active]="studentFilter === 'oldest'"
            (click)="updateStudentFilter('oldest')">
            Les plus anciens
          </button>
        </div>
      </div>
      
      <table class="users-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom d'utilisateur</th>
            <th>Email</th>
            <th>Statut</th>
            <th>Créé le</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of paginatedStudents">
            <td>{{ student.id }}</td>
            <td>{{ student.username }}</td>
            <td>{{ student.email }}</td>
            <td>
              <span class="status-badge" [ngClass]="{'active': student.isActivated, 'inactive': !student.isActivated}">
                {{ student.isActivated ? 'Actif' : 'Inactif' }}
              </span>
            </td>
            <td>{{ student.created_at | date:'short' }}</td>
            <td class="action-buttons">
              <button 
                class="toggle-btn" 
                [ngClass]="{'disable-btn': student.isActivated, 'enable-btn': !student.isActivated}"
                (click)="toggleStudentActivation(student)"
                [disabled]="actionLoading">
                {{ student.isActivated ? 'Désactiver' : 'Activer' }}
              </button>
              <button 
                class="delete-btn"
                (click)="openDeleteConfirm('student', student.id, student.username)"
                [disabled]="actionLoading">
                Supprimer
              </button>
            </td>
          </tr>
          <tr *ngIf="paginatedStudents.length === 0">
            <td colspan="6" class="no-data">Aucun étudiant trouvé</td>
          </tr>
        </tbody>
      </table>
      
      <!-- Students Pagination -->
      <div class="pagination-controls" *ngIf="getStudentFilteredCount() > itemsPerPage">
        <button 
          (click)="prevPageStudents()" 
          [disabled]="currentPageStudents === 1"
          class="pagination-btn">
          Précédent
        </button>
        <span class="pagination-info">
          Page {{ currentPageStudents }} sur {{ getTotalPagesStudents() }}
        </span>
        <button 
          (click)="nextPageStudents()" 
          [disabled]="currentPageStudents === getTotalPagesStudents()"
          class="pagination-btn">
          Suivant
        </button>
      </div>
    </div>

    <!-- Courses Table -->
    <div class="table-container">
      <div class="table-header">
        <h2>Cours</h2>
        <div class="header-actions">
          <button class="refresh-btn" (click)="loadAllCourses()" [disabled]="courseLoading">
            <span *ngIf="!courseLoading">Actualiser</span>
            <span *ngIf="courseLoading">Chargement...</span>
          </button>
        </div>
      </div>
      
      <!-- Course Loading indicator -->
      <div *ngIf="courseLoading" class="loading">
        <p>Chargement des cours...</p>
      </div>
      
      <table class="users-table" *ngIf="!courseLoading">
        <thead>
          <tr>
            <th>ID</th>
            <th>Titre</th>
            <th>Catégorie</th>
            <th>Enseignant</th>
            <th>Étudiants inscrits</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let course of paginatedCourses">
            <td>{{ course.id }}</td>
            <td>{{ course.titre }}</td>
            <td>{{ course.category }}</td>
            <td>{{ course.teacherName }}</td>
            <td>{{ course.enrolled_student_count }}</td>
            <td class="action-buttons">
              <button 
                class="delete-btn"
                (click)="openCourseDeleteConfirm(course.id, course.titre)"
                [disabled]="actionLoading">
                Supprimer
              </button>
            </td>
          </tr>
          <tr *ngIf="paginatedCourses.length === 0">
            <td colspan="6" class="no-data">Aucun cours trouvé</td>
          </tr>
        </tbody>
      </table>
      
      <!-- Courses Pagination -->
      <div class="pagination-controls" *ngIf="allCourses.length > itemsPerPage && !courseLoading">
        <button 
          (click)="prevPageCourses()" 
          [disabled]="currentPageCourses === 1"
          class="pagination-btn">
          Précédent
        </button>
        <span class="pagination-info">
          Page {{ currentPageCourses }} sur {{ getTotalPagesCourses() }}
        </span>
        <button 
          (click)="nextPageCourses()" 
          [disabled]="currentPageCourses === getTotalPagesCourses()"
          class="pagination-btn">
          Suivant
        </button>
      </div>
    </div>
    
    <!-- Backups Table -->
    <div class="table-container">
      <div class="table-header">
        <h2>Sauvegardes de base de données</h2>
        <div class="header-actions">
          <button class="create-btn" (click)="createBackup()" [disabled]="backupLoading">
            <span *ngIf="!backupLoading">Créer une sauvegarde</span>
            <span *ngIf="backupLoading">Création...</span>
          </button>
          <button class="refresh-btn" (click)="refreshBackups()" [disabled]="backupLoading">
            <span *ngIf="!backupLoading">Actualiser</span>
            <span *ngIf="backupLoading">Chargement...</span>
          </button>
        </div>
      </div>
      
      <!-- Backup Loading indicator -->
      <div *ngIf="backupLoading" class="loading">
        <p>Chargement des sauvegardes...</p>
      </div>
      
      <table class="users-table" *ngIf="!backupLoading">
        <thead>
          <tr>
            <th>Nom du fichier</th>
            <th>Créé le</th>
            <th>Taille</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let backup of allBackups">
            <td>{{ backup.filename }}</td>
            <td>{{ backup.createdAt | date:'short' }}</td>
            <td>{{ formatFileSize(backup.size) }}</td>
            <td class="action-buttons">
              <button 
                class="download-btn"
                (click)="downloadBackup(backup.filename)">
                Télécharger
              </button>
              <button 
                class="delete-btn"
                (click)="openBackupDeleteConfirm(backup.filename)"
                [disabled]="actionLoading">
                Supprimer
              </button>
            </td>
          </tr>
          <tr *ngIf="allBackups.length === 0">
            <td colspan="4" class="no-data">Aucune sauvegarde trouvée</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Logs Table -->
    <div class="table-container">
      <div class="table-header">
        <h2>Journaux système</h2>
        <div class="header-actions">
          <button class="clear-btn" (click)="clearLogs()" [disabled]="logLoading">
            <span *ngIf="!logLoading">Effacer tous les journaux</span>
            <span *ngIf="logLoading">Effacement...</span>
          </button>
          <button class="export-btn" (click)="exportLogs()" [disabled]="logLoading">
            <span *ngIf="!logLoading">Exporter en CSV</span>
            <span *ngIf="logLoading">Exportation...</span>
          </button>
          <button class="refresh-btn" (click)="refreshLogs()" [disabled]="logLoading">
            <span *ngIf="!logLoading">Actualiser</span>
            <span *ngIf="logLoading">Chargement...</span>
          </button>
        </div>
      </div>
      
      <!-- Log Loading indicator -->
      <div *ngIf="logLoading" class="loading">
        <p>Chargement des journaux...</p>
      </div>
      
      <table class="users-table" *ngIf="!logLoading">
        <thead>
          <tr>
            <th>Horodatage</th>
            <th>Niveau</th>
            <th>Message</th>
            <th>Service</th>
            <th>ID utilisateur</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let log of paginatedLogs">
            <td>{{ log.timestamp | date:'short' }}</td>
            <td>
              <span class="log-level" [ngClass]="log.level">
                {{ log.level }}
              </span>
            </td>
            <td>{{ log.message }}</td>
            <td>{{ log.service }}</td>
            <td>{{ log.userId }}</td>
          </tr>
          <tr *ngIf="paginatedLogs.length === 0">
            <td colspan="5" class="no-data">Aucun journal trouvé</td>
          </tr>
        </tbody>
      </table>
      
      <!-- Logs Pagination -->
      <div class="pagination-controls" *ngIf="allLogs.length > itemsPerPage && !logLoading">
        <button 
          (click)="prevPageLogs()" 
          [disabled]="currentPageLogs === 1"
          class="pagination-btn">
          Précédent
        </button>
        <span class="pagination-info">
          Page {{ currentPageLogs }} sur {{ getTotalPagesLogs() }}
        </span>
        <button 
          (click)="nextPageLogs()" 
          [disabled]="currentPageLogs === getTotalPagesLogs()"
          class="pagination-btn">
          Suivant
        </button>
      </div>
    </div>
  </section>

  <!-- Create Teacher Modal -->
  <div class="modal" *ngIf="showCreateTeacherForm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Créer un nouvel enseignant</h3>
        <span class="close" (click)="closeCreateTeacherForm()">&times;</span>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="createTeacher()" #teacherForm="ngForm">
          <div class="form-group">
            <label for="teacherUsername">Nom d'utilisateur *</label>
            <input 
              type="text" 
              id="teacherUsername" 
              [(ngModel)]="newTeacher.username" 
              name="teacherUsername" 
              class="form-control" 
              required
              placeholder="Entrez le nom d'utilisateur de l'enseignant">
          </div>
          
          <div class="form-group">
            <label for="teacherEmail">Email *</label>
            <input 
              type="email" 
              id="teacherEmail" 
              [(ngModel)]="newTeacher.email" 
              name="teacherEmail" 
              class="form-control" 
              required
              placeholder="Entrez l'email de l'enseignant">
          </div>
          
          <div class="form-group">
            <label for="teacherPassword">Mot de passe *</label>
            <input 
              type="password" 
              id="teacherPassword" 
              [(ngModel)]="newTeacher.password" 
              name="teacherPassword" 
              class="form-control" 
              required
              placeholder="Entrez le mot de passe de l'enseignant">
          </div>
          
          <div class="form-group">
            <label for="teacherModule">Module</label>
            <input 
              type="text" 
              id="teacherModule" 
              [(ngModel)]="newTeacher.module" 
              name="teacherModule" 
              class="form-control"
              placeholder="Entrez le module de l'enseignant (facultatif)">
          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeCreateTeacherForm()" [disabled]="actionLoading">
              Annuler
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="actionLoading">
              {{ actionLoading ? 'Création...' : 'Créer un enseignant' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Create Student Modal -->
  <div class="modal" *ngIf="showCreateStudentForm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Créer un nouvel étudiant</h3>
        <span class="close" (click)="closeCreateStudentForm()">&times;</span>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="createStudent()" #studentForm="ngForm">
          <div class="form-group">
            <label for="studentUsername">Nom d'utilisateur *</label>
            <input 
              type="text" 
              id="studentUsername" 
              [(ngModel)]="newStudent.username" 
              name="studentUsername" 
              class="form-control" 
              required
              placeholder="Entrez le nom d'utilisateur de l'étudiant">
          </div>
          
          <div class="form-group">
            <label for="studentEmail">Email *</label>
            <input 
              type="email" 
              id="studentEmail" 
              [(ngModel)]="newStudent.email" 
              name="studentEmail" 
              class="form-control" 
              required
              placeholder="Entrez l'email de l'étudiant">
          </div>
          
          <div class="form-group">
            <label for="studentPassword">Mot de passe *</label>
            <input 
              type="password" 
              id="studentPassword" 
              [(ngModel)]="newStudent.password" 
              name="studentPassword" 
              class="form-control" 
              required
              placeholder="Entrez le mot de passe de l'étudiant">
          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeCreateStudentForm()" [disabled]="actionLoading">
              Annuler
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="actionLoading">
              {{ actionLoading ? 'Création...' : 'Créer un étudiant' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Create Admin Modal -->
  <div class="modal" *ngIf="showCreateAdminForm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Créer un nouvel administrateur</h3>
        <span class="close" (click)="closeCreateAdminForm()">&times;</span>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="createAdmin()" #adminForm="ngForm">
          <div class="form-group">
            <label for="adminUsername">Nom d'utilisateur *</label>
            <input 
              type="text" 
              id="adminUsername" 
              [(ngModel)]="newAdmin.username" 
              name="adminUsername" 
              class="form-control" 
              required
              placeholder="Entrez le nom d'utilisateur de l'administrateur">
            <div class="error-message" *ngIf="adminForm.submitted && !newAdmin.username">
              Le nom d'utilisateur est requis
            </div>
          </div>
          
          <div class="form-group">
            <label for="adminEmail">Email *</label>
            <input 
              type="email" 
              id="adminEmail" 
              [(ngModel)]="newAdmin.email" 
              name="adminEmail" 
              class="form-control" 
              required
              placeholder="Entrez l'email de l'administrateur">
            <div class="error-message" *ngIf="adminForm.submitted && !newAdmin.email">
              Un email valide est requis
            </div>
          </div>
          
          <div class="form-group">
            <label for="adminPassword">Mot de passe *</label>
            <input 
              type="password" 
              id="adminPassword" 
              [(ngModel)]="newAdmin.password" 
              name="adminPassword" 
              class="form-control" 
              required
              minlength="6"
              placeholder="Entrez le mot de passe de l'administrateur (min 6 caractères)">
            <div class="error-message" *ngIf="adminForm.submitted && !newAdmin.password">
              Le mot de passe est requis (minimum 6 caractères)
            </div>
          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeCreateAdminForm()" [disabled]="actionLoading">
              Annuler
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="actionLoading">
              {{ actionLoading ? 'Création...' : 'Créer un administrateur' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal" *ngIf="showDeleteConfirm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Confirmer la suppression</h3>
        <span class="close" (click)="closeDeleteConfirm()">&times;</span>
      </div>
      <div class="modal-body">
        <p>Êtes-vous sûr de vouloir supprimer <strong>{{ deleteItemName }}</strong> ? Cette action est irréversible et supprimera définitivement toutes les données associées.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeDeleteConfirm()" [disabled]="actionLoading">
          Annuler
        </button>
        <button type="button" class="btn btn-danger" (click)="confirmDelete()" [disabled]="actionLoading">
          {{ actionLoading ? 'Suppression...' : 'Supprimer' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Course Delete Confirmation Modal -->
  <div class="modal" *ngIf="showCourseDeleteConfirm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Confirmer la suppression du cours</h3>
        <span class="close" (click)="closeCourseDeleteConfirm()">&times;</span>
      </div>
      <div class="modal-body">
        <p>Êtes-vous sûr de vouloir supprimer le cours <strong>{{ deleteCourseTitle }}</strong> ? Cette action est irréversible et supprimera définitivement toutes les données associées, y compris les tests, les questions, les inscriptions et les résultats des tests.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeCourseDeleteConfirm()" [disabled]="actionLoading">
          Annuler
        </button>
        <button type="button" class="btn btn-danger" (click)="confirmCourseDelete()" [disabled]="actionLoading">
          {{ actionLoading ? 'Suppression...' : 'Supprimer' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Delete Backup Confirmation Modal -->
  <div class="modal" *ngIf="showBackupDeleteConfirm">
    <div class="modal-content delete-confirm">
      <div class="modal-header">
        <h3>Confirmer la suppression</h3>
      </div>
      <div class="modal-body">
        <p>Êtes-vous sûr de vouloir supprimer le fichier de sauvegarde "{{ deleteBackupFilename }}" ? Cette action est irréversible.</p>
      </div>
      <div class="modal-footer">
        <button 
          class="cancel-btn" 
          (click)="closeBackupDeleteConfirm()"
          [disabled]="actionLoading">
          Annuler
        </button>
        <button 
          class="confirm-delete-btn" 
          (click)="confirmBackupDelete()"
          [disabled]="actionLoading">
          <span *ngIf="!actionLoading">Supprimer</span>
          <span *ngIf="actionLoading">Suppression...</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Background Overlay -->
  <div class="modal-overlay" *ngIf="showCreateTeacherForm || showCreateStudentForm || showCreateAdminForm || showDeleteConfirm || showCourseDeleteConfirm || showBackupDeleteConfirm"></div>
</div>